<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Aidan Apps</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Aidan Apps â€” company app launchpad" />
  <link rel="icon" href="favicon.ico" />
  <style>
    :root{
      /* Brand */
      --bg: #0b0b0c;              /* near-black */
      --surface: #121214;         /* card */
      --surface-2:#16161a;
      --text:#f5f3ee;             /* ivory */
      --muted:#b7b1a3;            /* warm gray */
      --gold:#c8a34a;             /* primary gold */
      --gold-2:#ffd97a;           /* hover highlight */
      --ring: rgba(200,163,74,.35);

      --radius-lg: 20px;
      --radius-md: 14px;
      --radius-sm: 10px;

      --shadow-1: 0 10px 30px rgba(0,0,0,.45);
      --shadow-2: 0 18px 44px rgba(0,0,0,.6);
      --max-w: 1100px;
      --gap: 16px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background:
        radial-gradient(90rem 60rem at 120% -10%, rgba(200,163,74,.12), transparent 60%),
        radial-gradient(70rem 50rem at -10% 10%, rgba(255,217,122,.08), transparent 60%),
        var(--bg);
    }

    .wrap{max-width:var(--max-w); margin:0 auto; padding:28px clamp(16px,3vw,28px)}
    .hero{
      border:1px solid rgba(200,163,74,.25);
      border-radius:var(--radius-lg);
      padding:28px;
      background:linear-gradient(180deg,var(--surface),var(--surface-2));
      box-shadow:var(--shadow-1);
      position:relative;
      overflow:hidden;
    }
    .brand{
      display:flex; align-items:center; gap:14px;
    }
    .mark{
      width:48px; height:48px; border-radius:50%;
      background:
        conic-gradient(from 210deg, var(--gold), var(--gold-2) 40%, var(--gold) 80%);
      box-shadow:inset 0 0 0 2px rgba(255,255,255,.25), 0 10px 30px rgba(200,163,74,.25);
      flex:none;
    }
    .brand h1{margin:0; font-size:1.4rem; letter-spacing:.5px}
    .tag{color:var(--muted); margin-top:6px; font-size:.95rem}

    .toolbar{
      display:grid; grid-template-columns: 1fr auto; gap:16px; margin-top:18px;
    }
    .search{
      display:flex; align-items:center; gap:10px;
      background:rgba(255,255,255,.02);
      border:1px solid rgba(255,255,255,.08);
      border-radius:999px; padding:10px 14px;
    }
    .search input{
      background:transparent; border:0; outline:none; color:var(--text); width:100%;
      font-size:.98rem;
    }
    .kbd{
      display:flex; align-items:center; gap:6px; color:var(--muted);
      border:1px solid rgba(255,255,255,.08); border-radius:999px; padding:8px 12px;
    }

    .section{
      margin-top:22px;
      border-radius:var(--radius-lg);
      background:linear-gradient(180deg,var(--surface),var(--surface-2));
      border:1px solid rgba(255,255,255,.08);
      box-shadow:var(--shadow-1);
      overflow:clip;
    }
    .section-head{
      display:flex; justify-content:space-between; align-items:center;
      padding:18px 18px 8px 18px;
      border-bottom:1px solid rgba(255,255,255,.06);
      background:linear-gradient(180deg, rgba(200,163,74,.04), transparent);
    }
    .section h2{margin:0; font-size:1.06rem; letter-spacing:.4px}
    .chips{display:flex; gap:8px; padding:0 16px 14px 16px; flex-wrap:wrap}
    .chip{
      background:rgba(255,255,255,.03);
      border:1px solid rgba(255,255,255,.08);
      color:var(--muted);
      padding:6px 10px; border-radius:999px; font-size:.82rem; cursor:pointer;
    }
    .chip[aria-pressed="true"]{
      color:var(--text); border-color:var(--gold);
      box-shadow:0 0 0 6px var(--ring);
    }

    .grid{
      padding:16px; display:grid; gap:var(--gap);
      grid-template-columns:repeat(1,minmax(0,1fr));
    }
    @media (min-width:680px){ .grid{ grid-template-columns:repeat(2, minmax(0,1fr)); } }
    @media (min-width:980px){ .grid{ grid-template-columns:repeat(3, minmax(0,1fr)); } }

    .card{
      position:relative; display:grid; grid-template-columns:auto 1fr; gap:12px;
      padding:16px; border-radius:var(--radius-md);
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(0,0,0,.08));
      border:1px solid rgba(255,255,255,.08);
      color:inherit; text-decoration:none; transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
      outline:none;
    }
    .card:hover, .card:focus-visible{
      transform: translateY(-1px);
      box-shadow: var(--shadow-2);
      border-color: var(--gold);
    }
    .card:focus-visible{ box-shadow: var(--shadow-2), 0 0 0 8px var(--ring); }

    .ico{
      width:46px; height:46px; border-radius:14px; display:grid; place-items:center;
      font-size:22px; color:#1b1203;
      background: linear-gradient(145deg,var(--gold-2),var(--gold));
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.35);
    }
    .meta{min-width:0; display:grid; gap:4px}
    .name{font-weight:600; letter-spacing:.3px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
    .desc{font-size:.88rem; color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis}

    .badge{
      position:absolute; right:10px; top:10px; font-size:.72rem;
      padding:4px 8px; border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.04); color:var(--muted);
    }
    .lock{ margin-left:6px; font-size:.9em; opacity:.9 }

    footer{ color:var(--muted); font-size:.9rem; text-align:center; padding:30px 0 10px }
    .hidden{display:none!important}
  </style>
</head>
<body>
  <div class="wrap">
    <!-- HERO / BRAND -->
    <section class="hero" role="banner" aria-label="Aidan Apps">
      <div class="brand">
        <div class="mark" aria-hidden="true"></div>
        <div>
          <h1>Aidan Apps</h1>
          <div class="tag">Elegant launchpad for company tools</div>
        </div>
      </div>

      <div class="toolbar">
        <label class="search" aria-label="Search apps">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M21 21l-4.2-4.2M10.8 18a7.2 7.2 0 1 1 0-14.4 7.2 7.2 0 0 1 0 14.4Z"
                  stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
          <input id="searchInput" type="search" placeholder="Search apps or locationsâ€¦" autocomplete="off" />
        </label>
        <div class="kbd"><span>Tip:</span><strong>/</strong><span>to focus search</span></div>
      </div>
    </section>

    <!-- CONTENT (rendered from apps.json) -->
    <main id="content" role="main"></main>

    <footer>Â© <span id="year"></span> Aidan Apps</footer>
  </div>

  <script>
    const CONFIG_URL = 'apps.json';
    const OPEN_IN_NEW_TAB = true;

    const ICONS = { calc:"ðŸ§®", keg:"ðŸº", inventory:"ðŸ“¦", analytics:"ðŸ“Š", transfer:"ðŸ”", bar:"ðŸ¸", kitchen:"ðŸ³" };
    const $ = s => document.querySelector(s);

    function el(tag, attrs={}, children=[]){
      const n = document.createElement(tag);
      for(const [k,v] of Object.entries(attrs)){
        if(k==='class') n.className=v;
        else if(k.startsWith('on') && typeof v==='function') n.addEventListener(k.slice(2), v);
        else if(v!=null) n.setAttribute(k,v);
      }
      [].concat(children).forEach(c => n.append(typeof c==='string'?document.createTextNode(c):c));
      return n;
    }

    function appCard(app){
      const icon = el('div',{class:'ico','aria-hidden':'true'}, ICONS[app.icon] || 'ðŸ§©');
      const name = el('div',{class:'name'}, app.name);
      const desc = el('div',{class:'desc'}, app.description || '');
      const meta = el('div',{class:'meta'}, [name,desc]);

      const a = el('a',{
        class:'card',
        href: app.url,
        target: OPEN_IN_NEW_TAB ? '_blank' : undefined,
        rel: OPEN_IN_NEW_TAB ? 'noopener noreferrer' : undefined,
        'data-search': [app.name, app.description, app.category, (app.location||''), (app.tags||[]).join(' ')].join(' ').toLowerCase()
      }, [icon, meta]);

      const badge = el('div',{class:'badge'}, app.location ? app.location : (app.category || 'App'));
      a.append(badge);

      if(app.requiresLogin){
        name.append(el('span',{class:'lock',title:'Login required','aria-label':'Login required'},'ðŸ”’'));
      }
      return a;
    }

    function sectionBlock(title, id, apps=[], categories=[]){
      const head = el('div',{class:'section-head'}, [el('h2',{},title), el('div',{})]);
      const chips = el('div',{class:'chips'});
      const all = el('button',{class:'chip','aria-pressed':'true','data-filter':'all'},'All');
      all.addEventListener('click', toggleChip); chips.append(all);

      categories.forEach(c=>{
        const chip = el('button',{class:'chip','aria-pressed':'false','data-filter':`cat:${c}`}, c);
        chip.addEventListener('click', toggleChip); chips.append(chip);
      });

      const grid = el('div',{class:'grid'}, apps.map(appCard));
      const sec = el('section',{class:'section',id}, [head, chips, grid]);
      return {sec, grid};
    }

    function toggleChip(e){
      const b=e.currentTarget; const pressed=b.getAttribute('aria-pressed')==='true';
      // Only one chip active at a time for elegance
      b.closest('.chips').querySelectorAll('.chip').forEach(x=>x.setAttribute('aria-pressed','false'));
      b.setAttribute('aria-pressed', String(!pressed));
      filter();
    }

    function activeFilters(){
      const chips=[...document.querySelectorAll('.chip[aria-pressed="true"]')].map(c=>c.getAttribute('data-filter'));
      return chips.includes('all') || chips.length===0 ? [] : chips;
    }

    function filter(){
      const q = $('#searchInput').value.trim().toLowerCase();
      const filters = activeFilters();
      document.querySelectorAll('.card').forEach(card=>{
        const t = (card.getAttribute('data-search')||'');
        let passQ = !q || t.includes(q);
        let passF = true;
        if(filters.length){
          const cf = filters.find(f=>f.startsWith('cat:'));
          if(cf){ const cat=cf.split(':')[1]; passF = t.includes(cat.toLowerCase()); }
        }
        card.classList.toggle('hidden', !(passQ && passF));
      });
    }

    function render(data){
      const main = $('#content'); main.innerHTML='';
      // Universal
      const universal = data.universal || [];
      const catsU = [...new Set(universal.map(a=>a.category||'general'))];
      const u = sectionBlock('Universal Apps','universal', universal, catsU);
      main.appendChild(u.sec);

      // Locations
      const locs = Object.keys(data.locations||{});
      locs.forEach(loc=>{
        const apps=(data.locations[loc]||[]).map(x=>({...x, location: loc}));
        const cats=[...new Set(apps.map(a=>a.category||'general'))];
        const s = sectionBlock(loc, `loc-${loc}`, apps, cats);
        main.appendChild(s.sec);
      });

      $('#searchInput').addEventListener('input', filter);
      document.addEventListener('keydown', e=>{ if(e.key==='/'){ e.preventDefault(); $('#searchInput').focus(); }});
    }

    (async function boot(){
      try{
        const res = await fetch(CONFIG_URL,{cache:'no-cache'});
        const data = await res.json();
        render(data);
      }catch(err){
        console.warn('apps.json missing, showing empty shell.', err);
        render({universal:[], locations:{}});
      }finally{
        document.getElementById('year').textContent=new Date().getFullYear();
      }
    })();
  </script>
</body>
</html>

